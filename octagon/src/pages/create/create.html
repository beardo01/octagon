<ion-header>
  <ion-navbar>
    <ion-title>Create</ion-title>
    <ion-buttons end>
      <button ion-button type="submit" form="createForm">
        <ion-label>Add</ion-label>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <form id="createForm" [formGroup]="createForm" (ngSubmit)="add(createForm.value)">
    <ion-list>
      <ion-item [class.invalid]="!createForm.controls.label.valid && (createForm.controls.label.dirty || submitAttempt)">
        <ion-label>Label</ion-label>
        <ion-select formControlName="label">
          <ion-option>{{labelNames[0]}}</ion-option>
          <ion-option>{{labelNames[1]}}</ion-option>
          <ion-option>{{labelNames[2]}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item [class.invalid]="!createForm.controls.location.valid && (createForm.controls.location.dirty || submitAttempt)">
        <ion-input placeholder="Location" formControlName="location" [(ngModel)]="location"></ion-input>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-item>
        <ion-label>Start Date</ion-label>
        <ion-datetime displayFormat="DD MMMM YYYY" min="{{minDate}}" max="{{maxDate}}" formControlName="dateStarts" [(ngModel)]="dateStarts"></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label>End Date</ion-label>
        <ion-datetime displayFormat="DD MMMM YYYY" min="{{minDate}}" max="{{maxDate}}" formControlName="dateEnds" [(ngModel)]="dateEnds"></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label>Start Time</ion-label>
        <ion-datetime displayFormat="h:mm A" pickerFormat="h mm A" formControlName="timeStarts" [(ngModel)]="timeStarts"></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label>End Time</ion-label>
        <ion-datetime displayFormat="h:mm A" pickerFormat="h mm A" formControlName="timeEnds" [(ngModel)]="timeEnds"></ion-datetime>
      </ion-item>


      <ion-item>
        <ion-label>Repeat</ion-label>
        <ion-select formControlName="repeatFrequency" [(ngModel)]="repeatFreq" (ionChange)="repeatToggle()">
          <ion-option>Never</ion-option>
          <ion-option>Daily</ion-option>
          <ion-option>Weekly</ion-option>
          <ion-option>Monthly</ion-option>
        </ion-select>
      </ion-item>

      <ion-item *ngIf="repeat">
        <ion-label>Repeat Till</ion-label>
        <ion-datetime displayFormat="DD MMMM YYYY" max="{{maxDate}}" min="{{minDate}}" formControlName="repeatEndDate" [(ngModel)]="repeatEndDate"></ion-datetime>
      </ion-item>

    </ion-list>


    <ion-list>
      <ion-item [class.invalid]="!createForm.controls.description.valid && (createForm.controls.description.dirty || submitAttempt)">
        <ion-textarea maxlength="50" formControlName="description" [(ngModel)]="description" placeholder="Description"></ion-textarea>
      </ion-item>
    </ion-list>

  </form>
</ion-content>